{"version":3,"sources":["www/lib/freezeReducer.js","www/ducks/alert/actions/deleteAlert.js","www/ducks/alert/reducer/reduceDeleteAlert.js","www/ducks/alert/actions/replaceAlert.js","www/ducks/alert/reducer/reduceReplaceAlert.js","www/ducks/alert/reducer/index.js","www/ducks/blog/actions/setPost.js","www/ducks/blog/reducer/reduceSetPost.js","www/ducks/blog/reducer/index.js","www/ducks/blog/actions/fetchPostList.js","www/lib/api.js","www/ducks/blog/middleware/whenFetchPostList.js","www/ducks/blog/actions/fetchPost.js","www/ducks/blog/middleware/whenFetchPost.js","www/ducks/blog/middleware/index.js","www/ducks/game/actions/fetchGame.js","www/ducks/game/actions/loginGame.js","www/ducks/game/actions/newGame.js","www/ducks/game/actions/replaceGame.js","www/ducks/game/middleware/whenFetchGame.js","www/ducks/game/middleware/whenLoginGame.js","www/ducks/game/middleware/whenNewGame.js","www/ducks/game/actions/compileGame.js","www/ducks/game/middleware/whenCompileGame.js","www/ducks/game/middleware/index.js","www/ducks/game/actions/logoutGame.js","www/ducks/game/reducer/index.js","www/ducks/game/reducer/reduceLogoutGame.js","www/ducks/game/reducer/reduceReplaceGame.js","www/lib/groupBy.js","www/lib/indexBy.js","www/ducks/gameCommands/actions/setCommand.js","www/ducks/gameCommands/reducer/index.js","www/ducks/gameCommands/reducer/reduceReplaceGame.js","www/ducks/gameCommands/reducer/reduceSetCommand.js","www/ducks/gameCommands/actions/saveCommands.js","www/ducks/gameCommands/selectors/getCommands.js","www/ducks/game/selectors/getGame.js","www/ducks/game/selectors/getPlayerId.js","www/ducks/gameCommands/middleware/whenSaveCommands.js","www/ducks/gameCommands/middleware/index.js","www/ducks/view/actions/setView.js","www/ducks/gameView/middleware/whenReplaceGame.js","www/ducks/gameView/middleware/index.js","www/ducks/view/reducer/reduceSetView.js","www/ducks/view/reducer/index.js","www/ducks/index.js","www/ducks/createDucksStore.js","www/lib/useSelect.js","www/ducks/view/selectors/getView.js","www/ducks/view/components/makeSubView.js","www/ducks/blog/selectors/getBlog.js","www/ducks/blog/selectors/getPost.js","www/lib/useDispatch.js","www/components/Button.js","www/components/LinkButton.js","www/views/blog/ShowPost.js","www/ducks/blog/selectors/listPosts.js","www/ducks/view/components/Link.js","www/views/blog/ListPosts.js","www/views/blog/BlogView.js","www/views/home/HomeView.js","www/lib/useInput.js","www/lib/useSubmitDispatch.js","www/views/login/LoginView.js","www/ducks/game/selectors/hasPlayer.js","www/ducks/game/selectors/getMap.js","www/ducks/game/selectors/listEntities.js","www/ducks/game/selectors/getEntitiesByCoordinates.js","www/ducks/game/selectors/listMapCoordinates.js","www/views/map/mapConstants.js","www/ducks/game/selectors/listEntitiesAtCoordinate.js","www/ducks/game/selectors/getEntitiesByCoordinatesByType.js","www/views/map/MapCell.js","www/views/map/MapView.js","www/ducks/gameCommands/selectors/getEntityCommands.js","www/ducks/gameCommands/selectors/getEntityCommand.js","www/ducks/gameCommands/hooks/useCommandInput.js","www/ducks/gameCommands/hooks/useCommandValue.js","www/entities/star/StarCommand.js","www/entities/star/StarDescription.js","www/entities/star/index.js","www/entities/ship/ShipCommand.js","www/entities/ship/ShipDescription.js","www/entities/ship/index.js","www/entities/descriptors.js","www/entities/Entity.js","www/entities/Entities.js","www/views/cell/CellView.js","www/views/RootView.js","www/views/play/PlayView.js","www/views/game/GameView.js","www/views/new/NewView.js","www/layout/Header.js","www/layout/Version.js","www/ducks/alert/selectors/getAlert.js","www/ducks/alert/components/Alert.js","www/layout/AppLayout.js","www/serviceWorker.js","www/index.js","www/makeApp.js"],"names":["freezeds","WeakSet","freezeReducer","reduce","state","action","freezeState","has","add","Object","keys","forEach","k","val","freeze","DELETE_ALERT","deleteAlert","type","reduceDeleteAlert","REPLACE_ALERT","replaceAlert","text","reduceReplaceAlert","reduceAlert","SET_POST","setPost","post","reduceSetPost","id","reduceBlog","FETCH_POST_LIST","fetchPostList","api","get","url","options","fetch","method","headers","response","json","result","ok","Promise","reject","status","data","put","body","JSON","stringify","delete","store","a","list","p","dispatch","whenFetchPostList","FETCH_POST","fetchPost","postId","whenFetchPost","blogMiddleware","next","FETCH_GAME","fetchGame","playerId","LOGIN_GAME","loginGame","NEW_GAME","newGame","mapCode","REPLACE_GAME","replaceGame","game","message","COMPILE_GAME","compileGame","whenCompileGame","whenFetchGame","whenLoginGame","whenNewGame","LOGOUT_GAME","logoutGame","reduceGame","reduceReplaceGame","groupBy","array","keyOrFn","keyFn","o","key","items","push","indexBy","SET_COMMAND","setCommand","entityId","value","command","reduceGameCommands","commands","nextState","reduceSetCommand","SAVE_COMMANDS","saveCommands","getCommands","gameCommands","getGame","getPlayerId","getState","commandsTree","flatMap","values","whenSaveCommands","SET_VIEW","setView","view","root","coordinates","whenReplaceGame","reduceSetView","reduceView","ducks","alert","blog","gameView","createDucksStore","preloadedState","appCompose","compose","appReducer","ducksReducer","appMiddleware","ducksMiddleware","createStore","applyMiddleware","thunk","useSelect","select","args","selector","useCallback","useSelector","getView","field","makeSubView","Views","null","undefined","viewName","View","makeUnknownView","getBlog","getPost","useDispatch","actionCreator","Error","dispatchRR","useDispatchRR","moreArgs","buttonClass","css","Button","onClick","children","className","cx","linkButtonClass","LinkButton","ShowPost","goHome","goBlog","refresh","useEffect","backToPosts","Container","Breadcrumb","Item","active","title","source","escapeHtml","listPosts","createSelector","linkClass","Link","followLink","ListPosts","map","BlogView","PlayView","useInput","initialValue","useState","setValue","event","target","useSubmitDispatch","preventDefault","LoginView","onPlayerId","login","Row","Col","md","Form","onSubmit","Group","controlId","Label","Control","onChange","placeholder","variant","hasPlayer","getMap","EMPTY","listEntities","entities","getEntitiesByCoordinates","e","row","column","listMapCoordinates","byCoordinates","CELL_WIDTH","CELL_HEIGHT","listEntitiesAtCoordinate","getEntitiesAtCoordinateByType","cellClassName","MapCell","byType","seeCell","useMemo","style","width","height","left","top","position","contents","data-testid","some","MapView","columns","rows","getEntityCommand","getEntityCommands","useCommandInput","fallbackValue","useCommandValue","ev","StarCommand","entity","shipName","onShipName","StarDescription","name","population","priority","ShipCommand","load","onLoad","ShipDescription","descriptors","star","ship","sort","b","descriptorsByType","Entity","getDescriptor","Description","Command","currentPlayerId","Entities","descriptor","filter","CellView","back","RootView","Home","HomeView","Play","logged","Game","save","compile","logout","New","onMapCode","submit","Blog","Header","goPlay","goNew","goGame","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","Nav","versionClass","Version","pkg","version","getAlert","alertClass","Alert","dismiss","AppLayout","Boolean","window","location","hostname","match","App","makeApp","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","trace","traceLimit","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"8jCAAMA,EAAW,IAAIC,QAuBNC,MAPf,SAAuBC,GACrB,OAAO,SAASC,EAAOC,GAErB,OAjBJ,SAASC,EAAYF,GAWnB,MAVqB,kBAAVA,IAAuBJ,EAASO,IAAIH,IAAUA,IACvDJ,EAASQ,IAAIJ,GACbK,OAAOC,KAAKN,GAAOO,SAAQ,SAAAC,GACzB,IAAMC,EAAMT,EAAMQ,GACC,kBAARC,IACTT,EAAMQ,GAAKN,EAAYO,QAI7BJ,OAAOK,OAAOV,GACPA,EAMEE,CADWH,EAAOC,EAAOC,MClBvBU,EAAe,qBACrB,SAASC,IACd,MAAO,CACLC,KAAMF,GCCKG,MAJf,SAA2Bd,EAAOC,GAChC,OAAO,MCDIc,EAAgB,sBACtB,SAASC,EAAaC,GAC3B,MAAO,CACLJ,KAAME,EACNE,QCEWC,MANf,SAA4BlB,EAAOC,GACjC,MAAO,CACLgB,KAAMhB,EAAOgB,OCcFE,MAXf,WAA4C,IAAvBnB,EAAsB,uDAAd,KAAMC,EAAQ,uCACzC,OAAQA,EAAOY,MACb,KAAKF,EACH,OAAOG,EAAkBd,EAAOC,GAClC,KAAKc,EACH,OAAOG,EAAmBlB,EAAOC,GACnC,QACE,OAAOD,ICZAoB,EAAW,gBACjB,SAASC,EAAQC,GACtB,MAAO,CACLT,KAAMO,EACNE,Q,qkBCEWC,MANf,SAAuBvB,EAAOC,GAAS,IAC7BqB,EAASrB,EAATqB,KACAE,EAAOF,EAAPE,GACR,OAAO,EAAP,GAAYxB,EAAZ,eAAoBwB,EAApB,KAA8BxB,EAAMwB,GAApC,GAA4CF,MCS/BG,MATf,WAAyC,IAArBzB,EAAoB,uDAAZ,GAAIC,EAAQ,uCACtC,OAAQA,EAAOY,MACb,KAAKO,EACH,OAAOG,EAAcvB,EAAOC,GAC9B,QACE,OAAOD,I,uBCRA0B,EAAkB,uBACxB,SAASC,IACd,MAAO,CACLd,KAAMa,G,yjBCHV,IAAME,EAAM,CACJC,IADI,kDACAC,EAAKC,GADL,yFAEeC,MAAMF,EAAD,GAC1BG,OAAQ,MACRC,QAAQ,GACN,eAAgB,mCACZH,GAAWA,EAAQG,UAEtBH,IARG,cAEFI,EAFE,gBAWaA,EAASC,OAXtB,UAWFC,EAXE,OAaHF,EAASG,GAbN,yCAcCC,QAAQC,OAAO,CACpBC,OAAQN,EAASM,OACjBC,KAAML,KAhBF,gCAmBDA,GAnBC,mGAsBJM,IAtBI,kDAsBAb,EAAKc,EAAMb,GAtBX,0FAuBDH,EAAIC,IAAIC,EAAR,GACLG,OAAQ,MACRW,KAAMC,KAAKC,UAAUF,IAClBb,KA1BG,qGA8BJT,KA9BI,kDA8BCQ,EAAKc,EAAMb,GA9BZ,0FA+BDH,EAAIC,IAAIC,EAAR,GACLG,OAAQ,OACRW,KAAMC,KAAKC,UAAUF,IAClBb,KAlCG,qGAsCJgB,OAtCI,kDAsCGjB,EAAKC,GAtCR,0FAuCDH,EAAIC,IAAIC,EAAR,GAAeG,OAAQ,UAAaF,KAvCnC,oGA2CGH,I,4CCxCf,WAAiCoB,EAAO/C,GAAxC,eAAAgD,EAAA,sEACyBrB,EAAIC,IAAI,iBADjC,kBACUqB,KACH3C,SAAQ,SAAA4C,GAAC,OAAIH,EAAMI,SAAS/B,EAAQ8B,OAF3C,4C,sBAKeE,M,8CCRFC,EAAa,kBACnB,SAASC,EAAUC,GACxB,MAAO,CACL3C,KAAMyC,EACNE,U,4CCDJ,WAA6BR,EAAO/C,GAApC,mBAAAgD,EAAA,6DACUO,EAAWvD,EAAXuD,OADV,SAEyB5B,EAAIC,IAAJ,wBAAyB2B,IAFlD,gBAEUlC,EAFV,EAEUA,KACR0B,EAAMI,SAAS/B,EAAQC,IAHzB,4C,sBAMemC,M,8CCQAC,EAZQ,SAAA1D,GAAK,OAAI,SAAA2D,GAAI,8CAAI,WAAM1D,GAAN,SAAAgD,EAAA,sDACtCU,EAAK1D,GADiC,KAG9BA,EAAOY,KAHuB,cAI/ByC,EAJ+B,SAM/B5B,EAN+B,0CAK3B+B,EAAczD,EAAOC,IALM,gCAO3BoD,EAAkBrD,EAAOC,IAPE,2CAAJ,wDCLvB2D,GAAa,aACX,SAASC,GAAUC,GAChC,MAAO,CACLjD,KAAM+C,GACNE,YCJG,IAAMC,GAAa,aACX,SAASC,GAAUF,GAChC,MAAO,CACLjD,KAAMkD,GACND,YCJG,IAAMG,GAAW,WACT,SAASC,GAAQC,GAC9B,MAAO,CACLtD,KAAMoD,GACNE,WCJG,IAAMC,GAAe,eACb,SAASC,GAAYC,GAClC,MAAO,CACLzD,KAAMuD,GACNE,Q,8CCDW,WAA6BtB,EAAO/C,GAApC,iBAAAgD,EAAA,6DACLa,EAAa7D,EAAb6D,SADK,SAEQlC,EAAIC,IAAJ,0BAA2BiC,IAFnC,OAEPzB,EAFO,OAGbW,EAAMI,SAASiB,GAAYhC,IAHd,4C,oECDA,WAA6BW,EAAO/C,GAApC,eAAAgD,EAAA,sDACLa,EAAa7D,EAAb6D,SACRd,EAAMI,SAASS,GAAUC,IAFZ,4C,oECCA,WAA2Bd,EAAO/C,GAAlC,eAAAgD,EAAA,6DACLkB,EAAYlE,EAAZkE,QADK,kBAGLvC,EAAIe,IAAI,eAAgB,CAAEwB,YAHrB,sDAKXnB,EAAMI,SAASpC,EAAa,KAAE0B,KAAK6B,UALxB,yD,sBCHR,IAAMC,GAAe,eACb,SAASC,GAAYX,GAClC,MAAO,CACLjD,KAAM2D,GACNV,Y,8CCDW,WAA+Bd,EAAO/C,GAAtC,iBAAAgD,EAAA,6DACLa,EAAa7D,EAAb6D,SADK,SAEQlC,EAAIN,KAAJ,0BAA4BwC,EAA5B,aAFR,OAEPzB,EAFO,OAGbW,EAAMI,SAASiB,GAAYhC,IAHd,4C,sBCMA,gBAAAW,GAAK,OAAI,SAAAW,GAAI,OAAI,SAAA1D,GAG9B,OAFA0D,EAAK1D,GAEGA,EAAOY,MACb,KAAK2D,GACH,ODXS,SAAf,qCCWaE,CAAgB1B,EAAO/C,GAChC,KAAK2D,GACH,OLbS,SAAf,qCKaae,CAAc3B,EAAO/C,GAC9B,KAAK8D,GACH,OJhBS,SAAf,qCIgBaa,CAAc5B,EAAO/C,GAC9B,KAAKgE,GACH,OHjBS,SAAf,qCGiBaY,CAAY7B,EAAO/C,OCpBzB,IAAM6E,GAAc,cACZ,SAASC,KACtB,MAAO,CACLlE,KAAMiE,ICEK,SAASE,KAAkC,IAAvBhF,EAAsB,uDAAd,KAAMC,EAAQ,uCACvD,OAAQA,EAAOY,MACb,KAAKiE,GACH,MCPG,GDQL,KAAKV,GACH,OEVS,SAA2BpE,EAAOC,GAC/C,OAAOA,EAAOqE,KFSHW,CAAkBjF,EAAOC,GAClC,QACE,OAAOD,GGOEkF,OAff,SAAiBC,GAAwB,IAAjBC,EAAgB,uDAAN,KAC1BC,EAA2B,kBAAZD,EAAuB,SAAAE,GAAC,OAAIA,EAAEF,IAAWA,EACxD/C,EAAS,GAUf,OATA8C,EAAM5E,SAAQ,SAAA+E,GACZ,IAAMC,EAAMF,EAAMC,GACdE,EAAQnD,EAAOkD,GACdC,IACHA,EAAQ,GACRnD,EAAOkD,GAAOC,GAEhBA,EAAMC,KAAKH,MAENjD,GCNMqD,OAVf,SAAiBP,GAAwB,IAAjBC,EAAgB,uDAAN,KAC1BC,EAA2B,kBAAZD,EAAuB,SAAAE,GAAC,OAAIA,EAAEF,IAAWA,EACxD/C,EAAS,GAKf,OAJA8C,EAAM5E,SAAQ,SAAA+E,GACZ,IAAMC,EAAMF,EAAMC,GAClBjD,EAAOkD,GAAOD,KAETjD,GCPF,IAAMsD,GAAc,mBACpB,SAASC,GAAWC,EAAUhF,EAAMiF,GACzC,MAAO,CACLjF,KAAM8E,GACNI,QAAS,CACPF,WACAhF,OACAiF,U,6jBCFS,SAASE,KAAwC,IAArBhG,EAAoB,uDAAZ,GAAIC,EAAQ,uCAC7D,OAAQA,EAAOY,MACb,KAAKuD,GACH,OCLS,SAA2BpE,EAAOC,GAAS,IAElDgG,EADWhG,EAATqE,KACc2B,UAAY,GAE5BC,EAAYhB,GAAQe,EAAU,YAIpC,OAHA5F,OAAOC,KAAK4F,GAAW3F,SAAQ,SAAAsF,GAC7BK,EAAUL,GAAYH,GAAQQ,EAAUL,GAAW,WAE9CK,EDHIjB,CAAkBjF,EAAOC,GAClC,KAAK0F,GACH,OEVS,SAA0B3F,EAAOC,GAAS,IAC/C8F,EAAY9F,EAAZ8F,QACAF,EAAmBE,EAAnBF,SAAUhF,EAASkF,EAATlF,KAClB,OAAO,MACFb,EADL,eAEG6F,EAFH,MAGO7F,EAAM6F,GAHb,eAIKhF,EAJL,MAKUb,EAAM6F,IAAa7F,EAAM6F,GAAUhF,GAL7C,GAMSkF,OFCEI,CAAiBnG,EAAOC,GACjC,QACE,OAAOD,GGZN,IAAMoG,GAAgB,oBACtB,SAASC,KACd,MAAO,CACLxF,KAAMuF,ICHK,SAASE,GAAYtG,GAClC,OAAOA,EAAMuG,aCDA,SAASC,GAAQxG,GAC9B,OAAOA,EAAMsE,KCCA,SAASmC,GAAYzG,GAClC,IAAMsE,EAAOkC,GAAQxG,GACrB,OAAOsE,GAAQA,EAAKR,S,8CCCP,WAAgCd,EAAO/C,GAAvC,qBAAAgD,EAAA,6DACPjD,EAAQgD,EAAM0D,WACdC,EAAeL,GAAYtG,GAC3B8D,EAAW2C,GAAYzG,GAEvBiG,EAAW5F,OAAOC,KAAKqG,GAAcC,SAAQ,SAAAf,GAAQ,OACzDxF,OAAOwG,OAAOF,EAAad,OANhB,SASPjE,EAAIe,IAAJ,0BAA2BmB,EAA3B,aAAgDmC,GATzC,OAUbjD,EAAMI,SAASpC,EAAa,eAVf,4C,sBCFA,gBAAAgC,GAAK,OAAI,SAAAW,GAAI,OAAI,SAAA1D,GAG9B,OAFA0D,EAAK1D,GAEGA,EAAOY,MACb,KAAKuF,GACH,ODHS,SAAf,qCCGaU,CAAiB9D,EAAO/C,OCRxB8G,GAAW,gBACjB,SAASC,GAAQC,GACtB,MAAO,CACLpG,KAAMkG,GACNE,Q,8CCFW,WAA+BjE,EAAO/C,GAAtC,SAAAgD,EAAA,sDACbD,EAAMI,SAAS4D,GAAQ,CAAEE,KAAM,OAAQC,YAAa,QADvC,4C,sBCCA,gBAAAnE,GAAK,OAAI,SAAAW,GAAI,OAAI,SAAA1D,GAG9B,OAFA0D,EAAK1D,GAEGA,EAAOY,MACb,KAAKuD,GACH,ODNS,SAAf,qCCMagD,CAAgBpE,EAAO/C,O,+NCHrBoH,OALf,SAAuBrH,EAAOC,GAE5B,O,2VAAO,IAAKD,EAAZ,GADiBC,EAATgH,OCWKK,OATf,WAAuD,IAAnCtH,EAAkC,uDAA1B,CAAEkH,KAAM,QAAUjH,EAAQ,uCACpD,OAAQA,EAAOY,MACb,KAAKkG,GACH,OAAOM,GAAcrH,EAAOC,GAC9B,QACE,OAAOD,ICQEuH,GATD,CACZC,QACAC,OACAnD,OACAiC,eACAmB,WACAT,QCMaU,OAXf,SAA0BC,GAAuC,IAAvBC,EAAsB,uDAATC,UAC/CC,EAAajI,EAAckI,IAAaT,KACxCU,EAAgBC,IAAgBX,IAEtC,OAAOY,sBACLJ,EACAH,EACAC,EAAWO,0BAAgBC,IAAOJ,MCDvBK,OAXf,SAAmBC,GAAkB,IAAD,uBAANC,EAAM,iCAANA,EAAM,kBAClC,IAAMC,EAAWC,uBACf,SAAA1I,GAAK,OAAIuI,EAAM,WAAN,GAAOvI,GAAP,OAAiBwI,MADA,CAGzBD,GAHyB,OAGdC,IAId,OAFcG,YAAYF,ICLbG,OAJf,SAAiB5I,EAAO6I,GACtB,OAAO7I,EAAMiH,KAAK4B,ICoBLC,OAjBf,SAAqBD,EAAOE,GAc1B,OAbAA,EAAMC,KAAOD,EAAMC,MAAQD,EAAME,UACjCF,EAAME,UAAYF,EAAME,WAAaF,EAAMC,KAM3C,WACE,IAAME,EAAWZ,GAAUM,GAASC,GAC9BM,EAAOJ,EAAM,GAAD,OAAIG,KANxB,SAAyBA,GACvB,OAAO,8CAA4BA,EAA5B,kBAA8CL,EAA9C,OAK8BO,CAAgBF,GAErD,OAAO,kBAACC,EAAD,Q,wCCZIE,OAJf,SAAiBrJ,GACf,OAAOA,EAAMyH,MCKA6B,OAJf,SAAiBtJ,EAAjB,GAAqC,IAAXwD,EAAU,EAAVA,OACxB,OAAO6F,GAAQrJ,GAAOwD,ICcT+F,OAdf,SAAqBC,GAAyB,IAAD,uBAANhB,EAAM,iCAANA,EAAM,kBAC3C,IAAKgB,EAAe,MAAM,IAAIC,MAAM,uCACpC,IAAMC,EAAaC,cASnB,OARiBjB,uBACf,WAAkB,IAAD,uBAAbkB,EAAa,yBAAbA,EAAa,gBACf,IAAM3J,EAASuJ,EAAa,WAAb,EAAiBhB,EAAjB,OAA0BoB,IACzCF,EAAWzJ,KAHa,CAMzBuJ,GANyB,OAMPhB,K,8YCThB,IAAMqB,GAAcC,aAAH,MA0BTC,OARf,YAA0D,IAAxCC,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,SAA8B,IAApBC,iBAAoB,MAAR,KAAQ,EACvD,OACE,4BAAQA,UAAWC,aAAGN,GAAaK,GAAYF,QAASA,GACrDC,I,yOCpBA,IAAMG,GAAkBD,aAC7BN,GACAC,aAFgC,OAuBnBO,OARf,YAA8D,IAAxCL,EAAuC,EAAvCA,QAASC,EAA8B,EAA9BA,SAA8B,IAApBC,iBAAoB,MAAR,KAAQ,EAC3D,OACE,kBAAC,GAAD,CAAQF,QAASA,EAASE,UAAWC,aAAGC,GAAiBF,IACtDD,ICYQK,OAxBf,YAA+B,IAAX9G,EAAU,EAAVA,OACZlC,EAAOgH,GAAUgB,GAAS,CAAE9F,WAC5B+G,EAAShB,GAAYvC,GAAS,CAAEE,KAAM,SACtCsD,EAASjB,GAAYvC,GAAS,CAAExD,OAAQ,OACxCiH,EAAUlB,GAAYhG,EAAWC,GACvCkH,oBAAUD,EAAS,IAEnB,IAAME,EAAc,kBAAC,GAAD,CAAYX,QAASQ,GAArB,sBAEpB,OACE,kBAACI,GAAA,EAAD,KACE,6BACA,kBAACC,GAAA,EAAD,KACE,kBAACA,GAAA,EAAWC,KAAZ,CAAiBd,QAASO,GAA1B,QACA,kBAACM,GAAA,EAAWC,KAAZ,CAAiBd,QAASQ,GAA1B,QACA,kBAACK,GAAA,EAAWC,KAAZ,CAAiBC,QAAM,GAAEzJ,EAAK0J,QAEhC,4BAAK1J,EAAK0J,OAPZ,IAOyB1J,EAAKsB,KAP9B,IAQE,kBAAC,KAAD,CAAeqI,OAAQ3J,EAAKsB,KAAMsI,YAAY,IAC7CP,I,SCnBP,IACeQ,GAPNC,aACL/B,IACA,SAAA5B,GAAI,OAAIpH,OAAOwG,OAAOY,M,2KCD1B,IAAM4D,GAAYvB,aAAH,MAkBAwB,OAVf,YAAqD,IAArCrB,EAAoC,EAApCA,SAAUhD,EAA0B,EAA1BA,KAA0B,IAApBiD,iBAAoB,MAAR,KAAQ,EAC5CqB,EAAahC,GAAYvC,GAASC,GAExC,OACE,0BAAMiD,UAAWC,aAAGkB,GAAWnB,GAAYF,QAASuB,GACjDtB,ICgBQuB,OAzBf,WACE,IAAMtI,EAAOoF,GAAU6C,IACjBZ,EAAShB,GAAYvC,GAAS,CAAEE,KAAM,SACtCuD,EAAUlB,GAAY5H,GAG5B,OAFA+I,oBAAUD,EAAS,IAGjB,kBAACG,GAAA,EAAD,KACE,6BACA,kBAACC,GAAA,EAAD,KACE,kBAACA,GAAA,EAAWC,KAAZ,CAAiBd,QAASO,GAA1B,QACA,kBAACM,GAAA,EAAWC,KAAZ,CAAiBC,QAAM,GAAvB,SAEF,2CACA,4BACG7H,EAAKuI,KAAI,SAAAtI,GAAC,OACT,wBAAIoC,IAAKpC,EAAE3B,IACT,kBAAC,GAAD,CAAMyF,KAAM,CAAEzD,OAAQL,EAAE3B,KAAO2B,EAAE6H,cCd9BU,OANf,WACE,IAAMlI,EAAS8E,GAAUM,GAAS,UAClC,OAAIpF,EAAe,kBAAC,GAAD,CAAUA,OAAQA,IAC9B,kBAAC,GAAD,OCHMmI,OAJf,WACE,OAAO,uC,gDCMMC,OAPf,WAAsC,IAApBC,EAAmB,uDAAJ,GAAI,EACTC,mBAASD,GADA,oBAC5B/F,EAD4B,KACrBiG,EADqB,KAInC,MAAO,CAACjG,EAFS4C,uBAAY,SAAAsD,GAAK,OAAID,EAASC,EAAMC,OAAOnG,SAAQ,MCUvDoG,OAXf,SAA2B1C,GAAyB,IAAD,uBAANhB,EAAM,iCAANA,EAAM,kBACjD,IAAMpF,EAAWmG,GAAW,WAAX,GAAYC,GAAZ,OAA8BhB,IAC/C,OAAOE,uBACL,SAAAsD,GACEA,EAAMG,iBACN/I,MAEF,CAACA,KCJU,SAASgJ,KAAa,IAAD,EACHR,GAAS,IADN,oBAC3B9H,EAD2B,KACjBuI,EADiB,KAE5BC,EAAQJ,GAAkBlI,GAAWF,GAE3C,OACE,kBAAC8G,GAAA,EAAD,KACE,6BACA,6BACA,8CACA,6BACA,kBAAC2B,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAKC,GAAI,GACP,kBAACC,GAAA,EAAD,CAAMC,SAAUL,GACd,kBAACI,GAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,GAAA,EAAKI,MAAN,iBACA,kBAACJ,GAAA,EAAKK,QAAN,CACElM,KAAK,OACLiF,MAAOhC,EACPkJ,SAAUX,EACVY,YAAY,oBAGhB,kBAAC,KAAD,CAAQC,QAAQ,UAAUrM,KAAK,UAA/B,cC1BG,SAASsM,GAAUnN,GAEhC,QADiByG,GAAYzG,GCDhB,SAASoN,GAAOpN,GAC7B,IAAMsE,EAAOkC,GAAQxG,GACrB,OAAOsE,GAAQA,EAAKmH,ICFtB,IAAM4B,GAAQ,GACC,SAASC,GAAatN,GACnC,IAAMsE,EAAOkC,GAAQxG,GACrB,OAAQsE,GAAQA,EAAKiJ,UAAaF,GCMpC,IACeG,GAPNpC,aACLkC,IACA,SAAAC,GAAQ,OAAIrI,GAAQqI,GAAU,SAAAE,GAAC,gBAAOA,EAAEC,IAAT,YAAgBD,EAAEE,cCOrD,IACeC,GAXNxC,aACLoC,IACA,SAAAK,GAAa,OACXxN,OAAOC,KAAKuN,GAAepC,KAAI,SAAAlG,GAAQ,IAAD,EACZsI,EAActI,GAAK,GAC3C,MAAO,CAAEmI,IAF2B,EAC5BA,IACMC,OAFsB,EACvBA,cCRRG,GAAa,EACbC,GAAc,ECCrBV,GAAQ,GACC,SAASW,GAAyBhO,EAAlC,GAA2D,IAAhB0N,EAAe,EAAfA,IAAKC,EAAU,EAAVA,OAC7D,OAAOH,GAAyBxN,GAAzB,UAAmC0N,EAAnC,YAA0CC,KAAaN,GCOhE,IACeY,GAPN7C,aACL4C,IACA,SAAAT,GAAQ,OAAIrI,GAAQqI,EAAU,W,iMCGlC,IAAMW,GAAgBpE,aAAH,KACRgE,GACCC,IAQG,SAASI,GAAT,GAAmC,IAAhBT,EAAe,EAAfA,IAAKC,EAAU,EAAVA,OAC/BS,EAAS9F,GAAU2F,GAA+B,CAAEP,MAAKC,WACzDJ,EAAWjF,GAAU0F,GAA0B,CAAEN,MAAKC,WACtD7J,EAAWwE,GAAU7B,IACrB4H,EAAU9E,GAAYvC,GAAS,CAAEG,YAAa,CAAEuG,MAAKC,YAE3D,OAAOW,mBAAQ,WACb,IAAMC,EAAQ,CACZC,MAAM,GAAD,OAAKV,GAAL,MACLW,OAAO,GAAD,OAAKV,GAAL,MACNW,KAAK,GAAD,OAAKZ,IAAcH,EAAS,GAA5B,MACJgB,IAAI,GAAD,OAAKZ,IAAeL,EAAM,GAA1B,MACHkB,SAAU,YAGNC,EAAW,GACbT,EAAM,MACRS,EAASpJ,KACP,0BAAMqJ,cAAY,OAAOvJ,IAAI,QAA7B,MAKA6I,EAAM,MACRS,EAASpJ,KACP,0BAAMqJ,cAAY,QAAQvJ,IAAI,SAA9B,SAMJ,IAAI2E,EAAYgE,GAKhB,OAJIX,EAASwB,MAAK,SAAAtB,GAAC,OAAIA,EAAE3J,WAAaA,OACpCoG,GAAa,UAIb,yBACE4E,cAAA,UAAgBpB,EAAhB,YAAuBC,GACvBY,MAAOA,EACPrE,UAAWA,EACXF,QAASqE,GAERQ,KAGJ,CAACnB,EAAKC,EAAQS,EAAQb,EAAUzJ,EAAUuK,IC3DhC,SAASW,KACtB,IAAMvD,EAAMnD,GAAU8E,IAChBjG,EAAcmB,GAAUsF,IAE9B,OAAOU,mBAAQ,WACb,IAAMC,EAAQ,CACZC,MAAM,GAAD,OAAKV,GAAarC,EAAIwD,QAAtB,MACLR,OAAO,GAAD,OAAKV,GAActC,EAAIyD,KAAvB,MACNN,SAAU,YAGZ,OACE,yBAAKE,cAAY,kBAAkBP,MAAOA,GACvCpH,EAAYsE,KAAI,gBAAGiC,EAAH,EAAGA,IAAKC,EAAR,EAAQA,OAAR,OACf,kBAACQ,GAAD,CAAST,IAAKA,EAAKC,OAAQA,EAAQpI,IAAG,UAAKmI,EAAL,YAAYC,WAIvD,CAAClC,EAAKtE,ICvBX,IAAMkG,GAAQ,GCAC,SAAS8B,GAAiBnP,EAA1B,GAAsD,IAAnB6F,EAAkB,EAAlBA,SAAUhF,EAAQ,EAARA,KAE1D,ODDa,SAA2Bb,EAA3B,GAAiD,IAAb6F,EAAY,EAAZA,SAEjD,OADiBS,GAAYtG,GACb6F,IAAawH,GCFZ+B,CAAkBpP,EAAO,CAAE6F,aAC5BhF,GCDH,SAASwO,GAAgBxJ,EAAUhF,GAA2B,IAAD,ECErE,SAAyBgF,EAAUhF,EAAMyO,GAC9C,IAAMvJ,EAAUuC,GAAU6G,GAAkB,CAAEtJ,WAAUhF,SAGxD,MAAO,CAFOkF,EAAUA,EAAQD,MAAQwJ,EACvB/F,GAAY3D,GAAYC,EAAUhF,IDJzB0O,CAAgB1J,EAAUhF,EADsB,uDAAJ,IAAI,oBACnEiF,EADmE,KAC5DiG,EAD4D,KAG1E,MAAO,CAACjG,EADS4C,uBAAY,SAAA8G,GAAE,OAAIzD,EAASyD,EAAGvD,OAAOnG,SAAQ,CAACiG,KEDlD,SAAS0D,GAAT,GAAkC,IAAD,EACfJ,GADe,EAAVK,OACkBlO,GAAI,aADZ,oBACvCmO,EADuC,KAC7BC,EAD6B,KAG9C,OACE,oCACE,kBAAClD,GAAA,EAAKE,MAAN,CAAYC,UAAU,eACpB,kBAACH,GAAA,EAAKI,MAAN,sBACA,kBAACJ,GAAA,EAAKK,QAAN,CACElM,KAAK,OACLiF,MAAO6J,EACP3C,SAAU4C,EACV3C,YAAY,iBCbP,SAAS4C,GAAT,GAAsC,IAAXH,EAAU,EAAVA,OAChCI,EAAqBJ,EAArBI,KAAMC,EAAeL,EAAfK,WAEd,OACE,oCACE,yBAAKjB,cAAY,QAAjB,SACQ,8BAAOgB,IAEA,MAAdC,GACC,yBAAKjB,cAAY,cACf,8CADF,KACgCiB,EADhC,MCRR,IAAMC,GAAW,EACXnP,GAAO,OCAE,SAASoP,GAAT,GAAkC,IAAD,EACvBZ,GADuB,EAAVK,OACUlO,GAAI,QADJ,oBACvC0O,EADuC,KACjCC,EADiC,KAG9C,OACE,oCACE,kBAACzD,GAAA,EAAKE,MAAN,CAAYC,UAAU,YACpB,kBAACH,GAAA,EAAKI,MAAN,aACA,kBAACJ,GAAA,EAAKK,QAAN,CACElM,KAAK,SACLiF,MAAOoK,EACPlD,SAAUmD,EACVlD,YAAY,iBCbP,SAASmD,GAAT,GAAsC,IAAXV,EAAU,EAAVA,OAChCI,EAAqBJ,EAArBI,KAAMC,EAAeL,EAAfK,WAEd,OACE,oCACE,yBAAKjB,cAAY,QAAjB,SACQ,8BAAOgB,IAEA,MAAdC,GACC,yBAAKjB,cAAY,cACf,8CADF,KACgCiB,EADhC,MCRR,IAAMC,GAAW,EACXnP,GAAO,OCAPwP,GAAc,CAClBC,EACAC,GAEAC,MAAK,SAACvN,EAAGwN,GAAJ,OAAUxN,EAAE+M,SAAWS,EAAET,YAE1BU,GAAoBhL,GAAQ2K,GAAa,QCLhC,SAASM,GAAT,GAA6B,IAAXjB,EAAU,EAAVA,OACvBI,EAAyBJ,EAAzBI,KAAMjP,EAAmB6O,EAAnB7O,KAAMiD,EAAa4L,EAAb5L,SADqB,EDO3C,SAAuB4L,GACrB,OAAOgB,GAAkBhB,EAAO7O,MCNC+P,CAAclB,GAAvCmB,EAFiC,EAEjCA,YAAaC,EAFoB,EAEpBA,QACfC,EAAkBzI,GAAU7B,IAElC,OACE,yBAAKqI,cAAA,UAAgBjO,EAAhB,YAAwBiP,IAC3B,kBAACe,EAAD,CAAanB,OAAQA,IACpB5L,IAAaiN,GAAmB,kBAACD,EAAD,CAASpB,OAAQA,KCTzC,SAASsB,GAAT,GAAiC,IAAbzD,EAAY,EAAZA,SACjC,OACE,oCACG8C,GAAYzJ,SAAQ,SAAAqK,GAAU,OAC7B1D,EACG2D,QAAO,SAAAzD,GAAC,OAAIA,EAAE5M,OAASoQ,EAAWpQ,QAClC4K,KAAI,SAAAiE,GAAM,OAAI,kBAACiB,GAAD,CAAQjB,OAAQA,EAAQnK,IAAKmK,EAAOlO,YCF9C,SAAS2P,KACtB,IAAMC,EAAO7H,GAAYvC,GAAS,CAAEG,YAAa,OAC3CA,EAAcmB,GAAUM,GAAS,eACjC2E,EAAWjF,GAAU0F,GAA0B7G,GAErD,OAAOmH,mBAAQ,WACb,OACE,yBAAKQ,cAAY,iBACf,4BAAQ9E,QAASoH,GAAjB,QACA,kBAACJ,GAAD,CAAUzD,SAAUA,OAGvB,CAACA,EAAU6D,ICbhB,IAQeC,GAREvI,GAAY,OAAQ,CACnCwI,KAAMC,GACNC,KCDF,WACE,IAAMC,EAASnJ,GAAU6E,IACnBhG,EAAcmB,GAAUM,GAAS,eAEvC,OAAK6I,EACAtK,EACE,kBAACgK,GAAD,MADkB,kBAACnC,GAAD,MADL,kBAAC5C,GAAD,ODFpBsF,KEFa,WACb,IAAM5N,EAAWwE,GAAU7B,IACrBkL,EAAOpI,GAAYlD,IACnBuL,EAAUrI,GAAY9E,GAAaX,GACnC+N,EAAStI,GAAYxE,IAE3B,OAAKjB,EAEH,6BACE,4BAAQkG,QAAS2H,GAAjB,aACA,4BAAQ3H,QAAS4H,GAAjB,gBACA,4BAAQ5H,QAAS6H,GAAjB,WALkB,2BFHtBC,IGLa,WAAoB,IAAD,EACHlG,GAAS,IADN,oBACzBzH,EADyB,KAChB4N,EADgB,KAE1BC,EAAS9F,GAAkBhI,GAASC,GAE1C,OACE,kBAACyG,GAAA,EAAD,KACE,6BACA,6BACA,qDACA,6BACA,kBAAC2B,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAKC,GAAI,GACP,kBAACC,GAAA,EAAD,CAAMC,SAAUqF,GACd,kBAACtF,GAAA,EAAKE,MAAN,CAAYC,UAAU,WACpB,kBAACH,GAAA,EAAKI,MAAN,iBACA,kBAACJ,GAAA,EAAKK,QAAN,CACElM,KAAK,OACLiF,MAAO3B,EACP6I,SAAU+E,EACV9E,YAAY,wBAGhB,kBAAC,KAAD,CAAQC,QAAQ,UAAUrM,KAAK,UAA/B,eHhBVoR,KAAMvG,K,oBIuBOwG,OA3Bf,WACE,IAAM3H,EAAShB,GAAYvC,GAAS,CAAEE,KAAM,SACtCiL,EAAS5I,GAAYvC,GAAS,CAAEE,KAAM,SACtCkL,EAAQ7I,GAAYvC,GAAS,CAAEE,KAAM,QACrCsD,EAASjB,GAAYvC,GAAS,CAAEE,KAAM,SACtCuK,EAASnJ,GAAU6E,IACnBkF,EAAS9I,GAAYvC,GAAS,CAAEE,KAAM,SAE5C,OACE,kBAACoL,GAAA,EAAD,CAAQC,GAAG,QAAQC,OAAO,KAAK1D,cAAY,UACzC,kBAAClE,GAAA,EAAD,KACE,kBAAC0H,GAAA,EAAOG,MAAR,CAAczI,QAASO,GAAvB,6BACA,kBAAC+H,GAAA,EAAOI,OAAR,CAAeC,gBAAc,qBAC7B,kBAACL,GAAA,EAAOM,SAAR,CAAiBpR,GAAG,oBAClB,kBAACqR,GAAA,EAAD,CAAK3I,UAAU,WACb,kBAAC2I,GAAA,EAAIvH,KAAL,CAAUtB,QAASO,GAAnB,QACA,kBAACsI,GAAA,EAAIvH,KAAL,CAAUtB,QAASmI,GAAnB,QACCV,GAAU,kBAACoB,GAAA,EAAIvH,KAAL,CAAUtB,QAASqI,GAAnB,QACX,kBAACQ,GAAA,EAAIvH,KAAL,CAAUtB,QAASoI,GAAnB,OACA,kBAACS,GAAA,EAAIvH,KAAL,CAAUtB,QAASQ,GAAnB,a,uLCvBZ,IAAMsI,GAAehJ,aAAH,MAiBHiJ,OARf,WACE,OACE,yBAAK7I,UAAW4I,IACbE,GAAIlD,KADP,MACgBkD,GAAIC,QADpB,MCXWC,OAJf,SAAkBlT,GAChB,OAAOA,EAAMwH,O,wICOf,IAAM2L,GAAarJ,aAAH,MAmBDsJ,OAbf,WACE,IAAM5L,EAAQc,GAAU4K,IAClBG,EAAU9J,GAAY3I,GAC5B,OAAK4G,EAGH,yBAAK0C,UAAWiJ,GAAYrE,cAAY,aACrCtH,EAAMvG,KACP,kBAAC,GAAD,CAAQ+I,QAASqJ,GAAjB,YALe,MCDNC,OAXf,YAAkC,IAAbrJ,EAAY,EAAZA,SACnB,OACE,oCACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACCA,ICCasJ,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCXN,IAGMC,GCJS,SAAiBhM,EAAgBC,GAC9C,IAAM7E,EAAQ2E,GAAiBC,EAAgBC,GAW/C,OATA,WACE,OACE,kBAAC,IAAD,CAAU7E,MAAOA,GACf,kBAAC,GAAD,KACE,kBAAC,GAAD,SDHE6Q,MAAQ5K,EAFlBuK,OAAOM,sCACPN,OAAOM,qCAAqC,CAAEC,OAAO,EAAMC,WAAY,MAEzEC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SDsH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.7d7cf4c3.chunk.js","sourcesContent":["const freezeds = new WeakSet();\n\nfunction freezeState(state) {\n  if (typeof state === \"object\" && !freezeds.has(state) && state) {\n    freezeds.add(state);\n    Object.keys(state).forEach(k => {\n      const val = state[k];\n      if (typeof val === \"object\") {\n        state[k] = freezeState(val);\n      }\n    });\n  }\n  Object.freeze(state);\n  return state;\n}\n\nfunction freezeReducer(reduce) {\n  return function(state, action) {\n    const nextState = reduce(state, action);\n    return freezeState(nextState);\n  };\n}\n\nexport default freezeReducer;\n","export const DELETE_ALERT = \"alert/DELETE_ALERT\";\nexport function deleteAlert() {\n  return {\n    type: DELETE_ALERT\n  };\n}\n","function reduceDeleteAlert(state, action) {\n  return null;\n}\n\nexport default reduceDeleteAlert;\n","export const REPLACE_ALERT = \"alert/REPLACE_ALERT\";\nexport function replaceAlert(text) {\n  return {\n    type: REPLACE_ALERT,\n    text\n  };\n}\n","function reduceReplaceAlert(state, action) {\n  return {\n    text: action.text\n  };\n}\n\nexport default reduceReplaceAlert;\n","import { DELETE_ALERT } from \"../actions/deleteAlert\";\nimport reduceDeleteAlert from \"./reduceDeleteAlert\";\nimport { REPLACE_ALERT } from \"../actions/replaceAlert\";\nimport reduceReplaceAlert from \"./reduceReplaceAlert\";\n\nfunction reduceAlert(state = null, action) {\n  switch (action.type) {\n    case DELETE_ALERT:\n      return reduceDeleteAlert(state, action);\n    case REPLACE_ALERT:\n      return reduceReplaceAlert(state, action);\n    default:\n      return state;\n  }\n}\n\nexport default reduceAlert;\n","export const SET_POST = \"blog/SET_POST\";\nexport function setPost(post) {\n  return {\n    type: SET_POST,\n    post\n  };\n}\n","function reduceSetPost(state, action) {\n  const { post } = action;\n  const { id } = post;\n  return { ...state, [id]: { ...state[id], ...post } };\n}\n\nexport default reduceSetPost;\n","import { SET_POST } from \"../actions/setPost\";\nimport reduceSetPost from \"./reduceSetPost\";\n\nfunction reduceBlog(state = {}, action) {\n  switch (action.type) {\n    case SET_POST:\n      return reduceSetPost(state, action);\n    default:\n      return state;\n  }\n}\n\nexport default reduceBlog;\n","export const FETCH_POST_LIST = \"blog/FETCH_POST_LIST\";\nexport function fetchPostList() {\n  return {\n    type: FETCH_POST_LIST\n  };\n}\n","const api = {\n  async get(url, options) {\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\",\n        ...(options && options.headers)\n      },\n      ...options\n    });\n\n    const result = await response.json();\n\n    if (!response.ok)\n      return Promise.reject({\n        status: response.status,\n        data: result\n      });\n\n    return result;\n  },\n\n  async put(url, body, options) {\n    return api.get(url, {\n      method: \"PUT\",\n      body: JSON.stringify(body),\n      ...options\n    });\n  },\n\n  async post(url, body, options) {\n    return api.get(url, {\n      method: \"POST\",\n      body: JSON.stringify(body),\n      ...options\n    });\n  },\n\n  async delete(url, options) {\n    return api.get(url, { method: \"DELETE\", ...options });\n  }\n};\n\nexport default api;\n","import api from \"../../../lib/api\";\nimport { setPost } from \"../actions/setPost\";\n\nasync function whenFetchPostList(store, action) {\n  const { list } = await api.get(\"/api/v1/posts\");\n  list.forEach(p => store.dispatch(setPost(p)));\n}\n\nexport default whenFetchPostList;\n","export const FETCH_POST = \"blog/FETCH_POST\";\nexport function fetchPost(postId) {\n  return {\n    type: FETCH_POST,\n    postId\n  };\n}\n","import api from \"../../../lib/api\";\nimport { setPost } from \"../actions/setPost\";\n\nasync function whenFetchPost(store, action) {\n  const { postId } = action;\n  const { post } = await api.get(`/api/v1/posts/${postId}`);\n  store.dispatch(setPost(post));\n}\n\nexport default whenFetchPost;\n","import { FETCH_POST_LIST } from \"../actions/fetchPostList\";\nimport whenFetchPostList from \"./whenFetchPostList\";\nimport { FETCH_POST } from \"../actions/fetchPost\";\nimport whenFetchPost from \"./whenFetchPost\";\n\nconst blogMiddleware = state => next => async action => {\n  next(action);\n\n  switch (action.type) {\n    case FETCH_POST:\n      return whenFetchPost(state, action);\n    case FETCH_POST_LIST:\n      return whenFetchPostList(state, action);\n    default: // nothing\n  }\n};\n\nexport default blogMiddleware;\n","export const FETCH_GAME = \"game/FETCH\";\nexport default function fetchGame(playerId) {\n  return {\n    type: FETCH_GAME,\n    playerId,\n  };\n}\n","export const LOGIN_GAME = \"game/LOGIN\";\nexport default function loginGame(playerId) {\n  return {\n    type: LOGIN_GAME,\n    playerId,\n  };\n}\n","export const NEW_GAME = \"game/NEW\";\nexport default function newGame(mapCode) {\n  return {\n    type: NEW_GAME,\n    mapCode\n  };\n}\n","export const REPLACE_GAME = \"game/REPLACE\";\nexport default function replaceGame(game) {\n  return {\n    type: REPLACE_GAME,\n    game,\n  };\n}\n","import api from \"../../../lib/api\";\nimport replaceGame from \"../actions/replaceGame\";\n\nexport default async function whenFetchGame(store, action) {\n  const { playerId } = action;\n  const result = await api.get(`/api/v1/players/${playerId}`);\n  store.dispatch(replaceGame(result));\n}\n","import fetchGame from \"../actions/fetchGame\";\n\nexport default async function whenLoginGame(store, action) {\n  const { playerId } = action;\n  store.dispatch(fetchGame(playerId));\n}\n","import api from \"../../../lib/api\";\nimport { replaceAlert } from \"../../alert/actions/replaceAlert\";\n\nexport default async function whenNewGame(store, action) {\n  const { mapCode } = action;\n  try {\n    await api.put(\"/api/v1/game\", { mapCode });\n  } catch (e) {\n    store.dispatch(replaceAlert(e.data.message));\n  }\n}\n","export const COMPILE_GAME = \"game/COMPILE\";\nexport default function compileGame(playerId) {\n  return {\n    type: COMPILE_GAME,\n    playerId,\n  };\n}\n","import api from \"../../../lib/api\";\nimport replaceGame from \"../actions/replaceGame\";\n\nexport default async function whenCompileGame(store, action) {\n  const { playerId } = action;\n  const result = await api.post(`/api/v1/players/${playerId}/compile`);\n  store.dispatch(replaceGame(result));\n}\n","import { FETCH_GAME } from \"../actions/fetchGame\";\nimport { LOGIN_GAME } from \"../actions/loginGame\";\nimport { NEW_GAME } from \"../actions/newGame\";\nimport whenFetchGame from \"./whenFetchGame\";\nimport whenLoginGame from \"./whenLoginGame\";\nimport whenNewGame from \"./whenNewGame\";\nimport { COMPILE_GAME } from \"../actions/compileGame\";\nimport whenCompileGame from \"./whenCompileGame\";\n\nexport default store => next => action => {\n  next(action);\n\n  switch (action.type) {\n    case COMPILE_GAME:\n      return whenCompileGame(store, action);\n    case FETCH_GAME:\n      return whenFetchGame(store, action);\n    case LOGIN_GAME:\n      return whenLoginGame(store, action);\n    case NEW_GAME:\n      return whenNewGame(store, action);\n    default: // nothing\n  }\n};\n","export const LOGOUT_GAME = \"game/LOGOUT\";\nexport default function logoutGame() {\n  return {\n    type: LOGOUT_GAME,\n  };\n}\n","import { REPLACE_GAME } from \"../actions/replaceGame\";\nimport reduceReplaceGame from \"./reduceReplaceGame\";\nimport { LOGOUT_GAME } from \"../actions/logoutGame\";\nimport reduceLogoutGame from \"./reduceLogoutGame\";\n\nexport default function reduceGame(state = null, action) {\n  switch (action.type) {\n    case LOGOUT_GAME:\n      return reduceLogoutGame(state, action);\n    case REPLACE_GAME:\n      return reduceReplaceGame(state, action);\n    default:\n      return state;\n  }\n}\n","export default function reduceLogoutGame(state, action) {\n  return {};\n}\n","export default function reduceReplaceGame(state, action) {\n  return action.game;\n}\n","/**\n * @param {array} array\n * @param {string | function} keyOrFn\n */\nfunction groupBy(array, keyOrFn = \"id\") {\n  const keyFn = typeof keyOrFn === \"string\" ? o => o[keyOrFn] : keyOrFn;\n  const result = {};\n  array.forEach(o => {\n    const key = keyFn(o);\n    let items = result[key];\n    if (!items) {\n      items = [];\n      result[key] = items;\n    }\n    items.push(o);\n  });\n  return result;\n}\n\nexport default groupBy;\n","function indexBy(array, keyOrFn = \"id\") {\n  const keyFn = typeof keyOrFn === \"string\" ? o => o[keyOrFn] : keyOrFn;\n  const result = {};\n  array.forEach(o => {\n    const key = keyFn(o);\n    result[key] = o;\n  });\n  return result;\n}\n\nexport default indexBy;\n","export const SET_COMMAND = \"gameCommands/SET\";\nexport function setCommand(entityId, type, value) {\n  return {\n    type: SET_COMMAND,\n    command: {\n      entityId,\n      type,\n      value,\n    },\n  };\n}\n","import { REPLACE_GAME } from \"../../game/actions/replaceGame\";\nimport reduceReplaceGame from \"./reduceReplaceGame\";\nimport { SET_COMMAND } from \"../actions/setCommand\";\nimport reduceSetCommand from \"./reduceSetCommand\";\n\nexport default function reduceGameCommands(state = {}, action) {\n  switch (action.type) {\n    case REPLACE_GAME:\n      return reduceReplaceGame(state, action);\n    case SET_COMMAND:\n      return reduceSetCommand(state, action);\n    default:\n      return state;\n  }\n}\n","import groupBy from \"../../../lib/groupBy\";\nimport indexBy from \"../../../lib/indexBy\";\n\nexport default function reduceReplaceGame(state, action) {\n  const { game } = action;\n  const commands = game.commands || [];\n\n  const nextState = groupBy(commands, \"entityId\");\n  Object.keys(nextState).forEach(entityId => {\n    nextState[entityId] = indexBy(nextState[entityId], \"type\");\n  });\n  return nextState;\n}\n","export default function reduceSetCommand(state, action) {\n  const { command } = action;\n  const { entityId, type } = command;\n  return {\n    ...state,\n    [entityId]: {\n      ...state[entityId],\n      [type]: {\n        ...(state[entityId] && state[entityId][type]),\n        ...command,\n      },\n    },\n  };\n}\n","export const SAVE_COMMANDS = \"gameCommands/SAVE\";\nexport function saveCommands() {\n  return {\n    type: SAVE_COMMANDS,\n  };\n}\n","export default function getCommands(state) {\n  return state.gameCommands;\n}\n","export default function getGame(state) {\n  return state.game;\n}\n","import getGame from \"./getGame\";\n\nexport default function getPlayerId(state) {\n  const game = getGame(state);\n  return game && game.playerId;\n}\n","import getCommands from \"../selectors/getCommands\";\nimport getPlayerId from \"../../game/selectors/getPlayerId\";\nimport api from \"../../../lib/api\";\nimport { replaceAlert } from \"../../alert/actions/replaceAlert\";\n\nexport default async function whenSaveCommands(store, action) {\n  const state = store.getState();\n  const commandsTree = getCommands(state);\n  const playerId = getPlayerId(state);\n\n  const commands = Object.keys(commandsTree).flatMap(entityId =>\n    Object.values(commandsTree[entityId]),\n  );\n\n  await api.put(`/api/v1/players/${playerId}/commands`, commands);\n  store.dispatch(replaceAlert(\"Game saved\"));\n}\n","import { SAVE_COMMANDS } from \"../actions/saveCommands\";\nimport whenSaveCommands from \"./whenSaveCommands\";\n\nexport default store => next => action => {\n  next(action);\n\n  switch (action.type) {\n    case SAVE_COMMANDS:\n      return whenSaveCommands(store, action);\n    default: // nothing\n  }\n};\n","export const SET_VIEW = \"view/SET_VIEW\";\nexport function setView(view) {\n  return {\n    type: SET_VIEW,\n    view,\n  };\n}\n","import { setView } from \"../../view/actions/setView\";\n\nexport default async function whenReplaceGame(store, action) {\n  store.dispatch(setView({ root: \"Play\", coordinates: null }));\n}\n","import { REPLACE_GAME } from \"../../game/actions/replaceGame\";\nimport whenReplaceGame from \"./whenReplaceGame\";\n\nexport default store => next => action => {\n  next(action);\n\n  switch (action.type) {\n    case REPLACE_GAME:\n      return whenReplaceGame(store, action);\n    default: // do nothing\n  }\n};\n","function reduceSetView(state, action) {\n  const { view } = action;\n  return { ...state, ...view };\n}\n\nexport default reduceSetView;\n","import { SET_VIEW } from \"../actions/setView\";\nimport reduceSetView from \"./reduceSetView\";\n\nfunction reduceView(state = { root: \"Home\" }, action) {\n  switch (action.type) {\n    case SET_VIEW:\n      return reduceSetView(state, action);\n    default:\n      return state;\n  }\n}\n\nexport default reduceView;\n","import * as alert from \"./alert/index\";\nimport * as blog from \"./blog/index\";\nimport * as game from \"./game/index\";\nimport * as gameCommands from \"./gameCommands/index\";\nimport * as gameView from \"./gameView/index\";\nimport * as view from \"./view/index\";\n\nconst ducks = {\n  alert,\n  blog,\n  game,\n  gameCommands,\n  gameView,\n  view,\n};\n\nexport default ducks;\n","import { applyMiddleware, compose, createStore } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport ducksReducer from \"ducks-reducer\";\nimport ducksMiddleware from \"ducks-middleware\";\nimport freezeReducer from \"../lib/freezeReducer\";\n\nimport ducks from \"./index\";\n\nfunction createDucksStore(preloadedState, appCompose = compose) {\n  const appReducer = freezeReducer(ducksReducer(ducks));\n  const appMiddleware = ducksMiddleware(ducks);\n\n  return createStore(\n    appReducer,\n    preloadedState,\n    appCompose(applyMiddleware(thunk, appMiddleware))\n  );\n}\n\nexport default createDucksStore;\n","import { useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nfunction useSelect(select, ...args) {\n  const selector = useCallback(\n    state => select(state, ...args),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [select, ...args]\n  );\n  const value = useSelector(selector);\n\n  return value;\n}\n\nexport default useSelect;\n","function getView(state, field) {\n  return state.view[field];\n}\n\nexport default getView;\n","import React from \"react\";\nimport useSelect from \"../../../lib/useSelect\";\nimport getView from \"../selectors/getView\";\n\nfunction makeSubView(field, Views) {\n  Views.null = Views.null || Views.undefined;\n  Views.undefined = Views.undefined || Views.null;\n\n  function makeUnknownView(viewName) {\n    return () => `Unknown view name \"${viewName}\" for \"${field}\".`;\n  }\n\n  function SubView() {\n    const viewName = useSelect(getView, field);\n    const View = Views[`${viewName}`] || makeUnknownView(viewName);\n\n    return <View />;\n  }\n  return SubView;\n}\n\nexport default makeSubView;\n","function getBlog(state) {\n  return state.blog;\n}\n\nexport default getBlog;\n","import getBlog from \"./getBlog\";\n\nfunction getPost(state, { postId }) {\n  return getBlog(state)[postId];\n}\n\nexport default getPost;\n","import { useCallback } from \"react\";\nimport { useDispatch as useDispatchRR } from \"react-redux\";\n\nfunction useDispatch(actionCreator, ...args) {\n  if (!actionCreator) throw new Error(\"The actionCreator is not a function\");\n  const dispatchRR = useDispatchRR();\n  const dispatch = useCallback(\n    (...moreArgs) => {\n      const action = actionCreator(...args, ...moreArgs);\n      dispatchRR(action);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [actionCreator, ...args]\n  );\n  return dispatch;\n}\n\nexport default useDispatch;\n","import React from \"react\";\nimport { cx, css } from \"emotion\";\n\nexport const buttonClass = css`\n  background: transparent;\n  font-size: inherit;\n  height: 2em;\n  box-sizing: border-box;\n  border: solid var(--light) 2px;\n  color: var(--light);\n  padding: 0 1em;\n  cursor: pointer;\n\n  :focus,\n  :hover {\n    outline: none;\n    color: var(--light);\n    border: solid var(--lightest) 2px;\n  }\n`;\n\nfunction Button({ onClick, children, className = null }) {\n  return (\n    <button className={cx(buttonClass, className)} onClick={onClick}>\n      {children}\n    </button>\n  );\n}\n\nexport default Button;\n","import React from \"react\";\nimport { cx, css } from \"emotion\";\nimport Button, { buttonClass } from \"./Button\";\n\nexport const linkButtonClass = cx(\n  buttonClass,\n  css`\n    border: none;\n    text-decoration: underline;\n    padding: 0;\n\n    :focus,\n    :hover {\n      border: none;\n      color: var(--lightest);\n    }\n  `\n);\n\nfunction LinkButton({ onClick, children, className = null }) {\n  return (\n    <Button onClick={onClick} className={cx(linkButtonClass, className)}>\n      {children}\n    </Button>\n  );\n}\n\nexport default LinkButton;\n","import React, { useEffect } from \"react\";\nimport { Container, Breadcrumb } from \"react-bootstrap\";\nimport ReactMarkdown from \"react-markdown\";\nimport useSelect from \"../../lib/useSelect\";\nimport getPost from \"../../ducks/blog/selectors/getPost\";\nimport useDispatch from \"../../lib/useDispatch\";\nimport { setView } from \"../../ducks/view/actions/setView\";\nimport LinkButton from \"../../components/LinkButton\";\nimport { fetchPost } from \"../../ducks/blog/actions/fetchPost\";\n\nfunction ShowPost({ postId }) {\n  const post = useSelect(getPost, { postId });\n  const goHome = useDispatch(setView, { root: \"Home\" });\n  const goBlog = useDispatch(setView, { postId: null });\n  const refresh = useDispatch(fetchPost, postId);\n  useEffect(refresh, []);\n\n  const backToPosts = <LinkButton onClick={goBlog}>« Back to posts</LinkButton>;\n\n  return (\n    <Container>\n      <br />\n      <Breadcrumb>\n        <Breadcrumb.Item onClick={goHome}>Home</Breadcrumb.Item>\n        <Breadcrumb.Item onClick={goBlog}>Blog</Breadcrumb.Item>\n        <Breadcrumb.Item active>{post.title}</Breadcrumb.Item>\n      </Breadcrumb>\n      <h1>{post.title}</h1>-{post.body}-\n      <ReactMarkdown source={post.body} escapeHtml={false} />\n      {backToPosts}\n    </Container>\n  );\n}\n\nexport default ShowPost;\n","import { createSelector } from \"reselect\";\nimport getBlog from \"./getBlog\";\n\nfunction makeListPosts() {\n  return createSelector(\n    getBlog,\n    blog => Object.values(blog)\n  );\n}\n\nconst listPosts = makeListPosts();\nexport default listPosts;\n","import React from \"react\";\nimport { css, cx } from \"emotion\";\nimport useDispatch from \"../../../lib/useDispatch\";\nimport { setView } from \"../actions/setView\";\n\nconst linkClass = css`\n  cursor: pointer;\n  text-decoration: underline;\n  :hover {\n    color: var(--lightest);\n  }\n`;\n\nfunction Link({ children, view, className = null }) {\n  const followLink = useDispatch(setView, view);\n\n  return (\n    <span className={cx(linkClass, className)} onClick={followLink}>\n      {children}\n    </span>\n  );\n}\n\nexport default Link;\n","import React, { useEffect } from \"react\";\nimport { Container, Breadcrumb } from \"react-bootstrap\";\nimport listPosts from \"../../ducks/blog/selectors/listPosts\";\nimport Link from \"../../ducks/view/components/Link\";\nimport useDispatch from \"../../lib/useDispatch\";\nimport { fetchPostList } from \"../../ducks/blog/actions/fetchPostList\";\nimport useSelect from \"../../lib/useSelect\";\nimport { setView } from \"../../ducks/view/actions/setView\";\n\nfunction ListPosts() {\n  const list = useSelect(listPosts);\n  const goHome = useDispatch(setView, { root: \"Home\" });\n  const refresh = useDispatch(fetchPostList);\n  useEffect(refresh, []);\n\n  return (\n    <Container>\n      <br />\n      <Breadcrumb>\n        <Breadcrumb.Item onClick={goHome}>Home</Breadcrumb.Item>\n        <Breadcrumb.Item active>Blog</Breadcrumb.Item>\n      </Breadcrumb>\n      <h1>Latest news</h1>\n      <ul>\n        {list.map(p => (\n          <li key={p.id}>\n            <Link view={{ postId: p.id }}>{p.title}</Link>\n          </li>\n        ))}\n      </ul>\n    </Container>\n  );\n}\n\nexport default ListPosts;\n","import React from \"react\";\nimport useSelect from \"../../lib/useSelect\";\nimport getView from \"../../ducks/view/selectors/getView\";\nimport ShowPost from \"./ShowPost\";\nimport ListPosts from \"./ListPosts\";\n\nfunction BlogView() {\n  const postId = useSelect(getView, \"postId\");\n  if (postId) return <ShowPost postId={postId} />;\n  return <ListPosts />;\n}\n\nexport default BlogView;\n","import React from \"react\";\n\nfunction PlayView() {\n  return <span>home</span>;\n}\n\nexport default PlayView;\n","import { useCallback, useState } from \"react\";\n\nfunction useInput(initialValue = \"\") {\n  const [value, setValue] = useState(initialValue);\n  const onChange = useCallback(event => setValue(event.target.value), []);\n\n  return [value, onChange];\n}\n\nexport default useInput;\n","import { useCallback } from \"react\";\nimport useDispatch from \"./useDispatch\";\n\nfunction useSubmitDispatch(actionCreator, ...args) {\n  const dispatch = useDispatch(actionCreator, ...args);\n  return useCallback(\n    event => {\n      event.preventDefault();\n      dispatch();\n    },\n    [dispatch]\n  );\n}\n\nexport default useSubmitDispatch;\n","import React from \"react\";\nimport { Container, Form, Button, Row, Col } from \"react-bootstrap\";\nimport useInput from \"../../lib/useInput\";\nimport useSubmitDispatch from \"../../lib/useSubmitDispatch\";\nimport loginGame from \"../../ducks/game/actions/loginGame\";\n\nexport default function LoginView() {\n  const [playerId, onPlayerId] = useInput(\"\");\n  const login = useSubmitDispatch(loginGame, playerId);\n\n  return (\n    <Container>\n      <br />\n      <br />\n      <h1>Log in to play</h1>\n      <br />\n      <Row>\n        <Col md={4}>\n          <Form onSubmit={login}>\n            <Form.Group controlId=\"username\">\n              <Form.Label>Username</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={playerId}\n                onChange={onPlayerId}\n                placeholder=\"Enter username\"\n              />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Log in\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import getPlayerId from \"./getPlayerId\";\n\nexport default function hasPlayer(state) {\n  const playerId = getPlayerId(state);\n  return !!playerId;\n}\n","import getGame from \"./getGame\";\n\nexport default function getMap(state) {\n  const game = getGame(state);\n  return game && game.map;\n}\n","import getGame from \"./getGame\";\n\nconst EMPTY = [];\nexport default function listEntities(state) {\n  const game = getGame(state);\n  return (game && game.entities) || EMPTY;\n}\n","import { createSelector } from \"reselect\";\nimport listEntities from \"./listEntities\";\nimport groupBy from \"../../../lib/groupBy\";\n\nfunction makeGetEntitiesByCoordinates() {\n  return createSelector(\n    listEntities,\n    entities => groupBy(entities, e => `${e.row},${e.column}`),\n  );\n}\n\nconst getEntitiesByCoordinates = makeGetEntitiesByCoordinates();\nexport default getEntitiesByCoordinates;\n","import { createSelector } from \"reselect\";\nimport getEntitiesByCoordinates from \"./getEntitiesByCoordinates\";\n\nfunction makeListMapCoordinates() {\n  return createSelector(\n    getEntitiesByCoordinates,\n    byCoordinates =>\n      Object.keys(byCoordinates).map(key => {\n        const { row, column } = byCoordinates[key][0];\n        return { row, column };\n      }),\n  );\n}\n\nconst listMapCoordinates = makeListMapCoordinates();\nexport default listMapCoordinates;\n","export const CELL_WIDTH = 5;\nexport const CELL_HEIGHT = 4;\n","import getEntitiesByCoordinates from \"./getEntitiesByCoordinates\";\n\nconst EMPTY = [];\nexport default function listEntitiesAtCoordinate(state, { row, column }) {\n  return getEntitiesByCoordinates(state)[`${row},${column}`] || EMPTY;\n}\n","import { createSelector } from \"reselect\";\nimport groupBy from \"../../../lib/groupBy\";\nimport listEntitiesAtCoordinate from \"./listEntitiesAtCoordinate\";\n\nfunction makeGetEntitiesAtCoordinateByType() {\n  return createSelector(\n    listEntitiesAtCoordinate,\n    entities => groupBy(entities, \"type\"),\n  );\n}\n\nconst getEntitiesAtCoordinateByType = makeGetEntitiesAtCoordinateByType();\nexport default getEntitiesAtCoordinateByType;\n","import React, { useMemo } from \"react\";\nimport { css } from \"emotion\";\nimport useSelect from \"../../lib/useSelect\";\nimport { CELL_WIDTH, CELL_HEIGHT } from \"./mapConstants\";\nimport listEntitiesAtCoordinate from \"../../ducks/game/selectors/listEntitiesAtCoordinate\";\nimport getEntitiesAtCoordinateByType from \"../../ducks/game/selectors/getEntitiesByCoordinatesByType\";\nimport getPlayerId from \"../../ducks/game/selectors/getPlayerId\";\nimport useDispatch from \"../../lib/useDispatch\";\nimport { setView } from \"../../ducks/view/actions/setView\";\n\nconst cellClassName = css`\n  width: ${CELL_WIDTH}em;\n  height: ${CELL_HEIGHT}em;\n  border: solid 1px rgba(0, 0, 0, 0.5);\n\n  &.yours {\n    background: blue;\n  }\n`;\n\nexport default function MapCell({ row, column }) {\n  const byType = useSelect(getEntitiesAtCoordinateByType, { row, column });\n  const entities = useSelect(listEntitiesAtCoordinate, { row, column });\n  const playerId = useSelect(getPlayerId);\n  const seeCell = useDispatch(setView, { coordinates: { row, column } });\n\n  return useMemo(() => {\n    const style = {\n      width: `${CELL_WIDTH}em`,\n      height: `${CELL_HEIGHT}em`,\n      left: `${CELL_WIDTH * (column - 1)}em`,\n      top: `${CELL_HEIGHT * (row - 1)}em`,\n      position: \"absolute\",\n    };\n\n    const contents = [];\n    if (byType[\"star\"]) {\n      contents.push(\n        <span data-testid=\"star\" key=\"star\">\n          *\n        </span>,\n      );\n    }\n    if (byType[\"ship\"]) {\n      contents.push(\n        <span data-testid=\"ships\" key=\"ships\">\n          »\n        </span>,\n      );\n    }\n\n    let className = cellClassName;\n    if (entities.some(e => e.playerId === playerId)) {\n      className += \" yours\";\n    }\n\n    return (\n      <div\n        data-testid={`${row},${column}`}\n        style={style}\n        className={className}\n        onClick={seeCell}\n      >\n        {contents}\n      </div>\n    );\n  }, [row, column, byType, entities, playerId, seeCell]);\n}\n","import React, { useMemo } from \"react\";\nimport useSelect from \"../../lib/useSelect\";\nimport getMap from \"../../ducks/game/selectors/getMap\";\nimport listMapCoordinates from \"../../ducks/game/selectors/listMapCoordinates\";\nimport { CELL_WIDTH, CELL_HEIGHT } from \"./mapConstants\";\nimport MapCell from \"./MapCell\";\n\nexport default function MapView() {\n  const map = useSelect(getMap);\n  const coordinates = useSelect(listMapCoordinates);\n\n  return useMemo(() => {\n    const style = {\n      width: `${CELL_WIDTH * map.columns}em`,\n      height: `${CELL_HEIGHT * map.rows}em`,\n      position: \"relative\",\n    };\n\n    return (\n      <div data-testid=\"map-of-the-game\" style={style}>\n        {coordinates.map(({ row, column }) => (\n          <MapCell row={row} column={column} key={`${row},${column}`} />\n        ))}\n      </div>\n    );\n  }, [map, coordinates]);\n}\n","import getCommands from \"./getCommands\";\n\nconst EMPTY = {};\nexport default function getEntityCommands(state, { entityId }) {\n  const commands = getCommands(state);\n  return commands[entityId] || EMPTY;\n}\n","import getEntityCommands from \"./getEntityCommands\";\n\nexport default function getEntityCommand(state, { entityId, type }) {\n  const commands = getEntityCommands(state, { entityId });\n  return commands[type];\n}\n","import { useCallback } from \"react\";\nimport { useCommandValue } from \"./useCommandValue\";\n\nexport default function useCommandInput(entityId, type, fallbackValue = \"\") {\n  const [value, setValue] = useCommandValue(entityId, type, fallbackValue);\n  const onChange = useCallback(ev => setValue(ev.target.value), [setValue]);\n  return [value, onChange];\n}\n","import useSelect from \"../../../lib/useSelect\";\nimport getEntityCommand from \"../selectors/getEntityCommand\";\nimport useDispatch from \"../../../lib/useDispatch\";\nimport { setCommand } from \"../actions/setCommand\";\n\nexport function useCommandValue(entityId, type, fallbackValue) {\n  const command = useSelect(getEntityCommand, { entityId, type });\n  const value = command ? command.value : fallbackValue;\n  const setValue = useDispatch(setCommand, entityId, type);\n  return [value, setValue];\n}\n","import React from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport useCommandInput from \"../../ducks/gameCommands/hooks/useCommandInput\";\n\nexport default function StarCommand({ entity }) {\n  const [shipName, onShipName] = useCommandInput(entity.id, \"BuildShip\");\n\n  return (\n    <>\n      <Form.Group controlId=\"newShipName\">\n        <Form.Label>New ship name</Form.Label>\n        <Form.Control\n          type=\"text\"\n          value={shipName}\n          onChange={onShipName}\n          placeholder=\"Ships name\"\n        />\n      </Form.Group>\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function StarDescription({ entity }) {\n  const { name, population } = entity;\n\n  return (\n    <>\n      <div data-testid=\"name\">\n        Star: <span>{name}</span>\n      </div>\n      {population != null && (\n        <div data-testid=\"population\">\n          <strong>Population</strong>: {population}.\n        </div>\n      )}\n    </>\n  );\n}\n","import StarCommand from \"./StarCommand\";\nimport StarDescription from \"./StarDescription\";\n\nconst priority = 1;\nconst type = \"star\";\n\nexport {\n  priority,\n  type,\n  StarCommand as Command,\n  StarDescription as Description,\n};\n","import React from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport useCommandInput from \"../../ducks/gameCommands/hooks/useCommandInput\";\n\nexport default function ShipCommand({ entity }) {\n  const [load, onLoad] = useCommandInput(entity.id, \"load\");\n\n  return (\n    <>\n      <Form.Group controlId=\"shipLoad\">\n        <Form.Label>Load</Form.Label>\n        <Form.Control\n          type=\"number\"\n          value={load}\n          onChange={onLoad}\n          placeholder=\"Ships name\"\n        />\n      </Form.Group>\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function ShipDescription({ entity }) {\n  const { name, population } = entity;\n\n  return (\n    <>\n      <div data-testid=\"name\">\n        Ship: <span>{name}</span>\n      </div>\n      {population != null && (\n        <div data-testid=\"population\">\n          <strong>Population</strong>: {population}.\n        </div>\n      )}\n    </>\n  );\n}\n","import ShipCommand from \"./ShipCommand\";\nimport ShipDescription from \"./ShipDescription\";\n\nconst priority = 5;\nconst type = \"ship\";\n\nexport {\n  priority,\n  type,\n  ShipCommand as Command,\n  ShipDescription as Description,\n};\n","import * as star from \"./star/index\";\nimport * as ship from \"./ship/index\";\nimport indexBy from \"../lib/indexBy\";\n\nconst descriptors = [\n  star,\n  ship,\n  //\n].sort((a, b) => a.priority - b.priority);\n\nconst descriptorsByType = indexBy(descriptors, \"type\");\n\nfunction getDescriptor(entity) {\n  return descriptorsByType[entity.type];\n}\n\nexport { descriptors as default, descriptorsByType, getDescriptor };\n","import React from \"react\";\nimport { getDescriptor } from \"./descriptors\";\nimport useSelect from \"../lib/useSelect\";\nimport getPlayerId from \"../ducks/game/selectors/getPlayerId\";\n\nexport default function Entity({ entity }) {\n  const { name, type, playerId } = entity;\n  const { Description, Command } = getDescriptor(entity);\n  const currentPlayerId = useSelect(getPlayerId);\n\n  return (\n    <div data-testid={`${type}-${name}`}>\n      <Description entity={entity} />\n      {playerId === currentPlayerId && <Command entity={entity} />}\n    </div>\n  );\n}\n","import React from \"react\";\nimport descriptors from \"./descriptors\";\nimport Entity from \"./Entity\";\n\nexport default function Entities({ entities }) {\n  return (\n    <>\n      {descriptors.flatMap(descriptor =>\n        entities\n          .filter(e => e.type === descriptor.type)\n          .map(entity => <Entity entity={entity} key={entity.id} />),\n      )}\n    </>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport useSelect from \"../../lib/useSelect\";\nimport getView from \"../../ducks/view/selectors/getView\";\nimport useDispatch from \"../../lib/useDispatch\";\nimport { setView } from \"../../ducks/view/actions/setView\";\nimport listEntitiesAtCoordinate from \"../../ducks/game/selectors/listEntitiesAtCoordinate\";\nimport Entities from \"../../entities/Entities\";\n\nexport default function CellView() {\n  const back = useDispatch(setView, { coordinates: null });\n  const coordinates = useSelect(getView, \"coordinates\");\n  const entities = useSelect(listEntitiesAtCoordinate, coordinates);\n\n  return useMemo(() => {\n    return (\n      <div data-testid=\"cell-entities\">\n        <button onClick={back}>Back</button>\n        <Entities entities={entities} />\n      </div>\n    );\n  }, [entities, back]);\n}\n","import makeSubView from \"../ducks/view/components/makeSubView\";\nimport BlogView from \"./blog/BlogView\";\nimport HomeView from \"./home/HomeView\";\nimport NewView from \"./new/NewView\";\nimport PlayView from \"./play/PlayView\";\nimport GameView from \"./game/GameView\";\n\nconst RootView = makeSubView(\"root\", {\n  Home: HomeView,\n  Play: PlayView,\n  Game: GameView,\n  New: NewView,\n  Blog: BlogView,\n});\n\nexport default RootView;\n","import React from \"react\";\nimport LoginView from \"../login/LoginView\";\nimport useSelect from \"../../lib/useSelect\";\nimport hasPlayer from \"../../ducks/game/selectors/hasPlayer\";\nimport MapView from \"../map/MapView\";\nimport getView from \"../../ducks/view/selectors/getView\";\nimport CellView from \"../cell/CellView\";\n\nfunction PlayView() {\n  const logged = useSelect(hasPlayer);\n  const coordinates = useSelect(getView, \"coordinates\");\n\n  if (!logged) return <LoginView />;\n  if (!coordinates) return <MapView />;\n  return <CellView />;\n}\n\nexport default PlayView;\n","import React, { useMemo } from \"react\";\nimport useSelect from \"../../lib/useSelect\";\nimport getPlayerId from \"../../ducks/game/selectors/getPlayerId\";\nimport useDispatch from \"../../lib/useDispatch\";\nimport { saveCommands } from \"../../ducks/gameCommands/actions/saveCommands\";\nimport logoutGame from \"../../ducks/game/actions/logoutGame\";\nimport compileGame from \"../../ducks/game/actions/compileGame\";\n\nexport default function GameView() {\n  const playerId = useSelect(getPlayerId);\n  const save = useDispatch(saveCommands);\n  const compile = useDispatch(compileGame, playerId);\n  const logout = useDispatch(logoutGame);\n\n  if (!playerId) return \"There is no game loaded\";\n  return (\n    <div>\n      <button onClick={save}>Save game</button>\n      <button onClick={compile}>Compile game</button>\n      <button onClick={logout}>Logout</button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Container, Form, Button, Row, Col } from \"react-bootstrap\";\nimport useInput from \"../../lib/useInput\";\nimport useSubmitDispatch from \"../../lib/useSubmitDispatch\";\nimport newGame from \"../../ducks/game/actions/newGame\";\n\nexport default function NewView() {\n  const [mapCode, onMapCode] = useInput(\"\");\n  const submit = useSubmitDispatch(newGame, mapCode);\n\n  return (\n    <Container>\n      <br />\n      <br />\n      <h1>Create a new universe</h1>\n      <br />\n      <Row>\n        <Col md={4}>\n          <Form onSubmit={submit}>\n            <Form.Group controlId=\"mapCode\">\n              <Form.Label>Map code</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={mapCode}\n                onChange={onMapCode}\n                placeholder=\"Enter the map code\"\n              />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Create\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { Container, Navbar, Nav } from \"react-bootstrap\";\n\nimport useDispatch from \"../lib/useDispatch\";\nimport { setView } from \"../ducks/view/actions/setView\";\nimport useSelect from \"../lib/useSelect\";\nimport hasPlayer from \"../ducks/game/selectors/hasPlayer\";\n\nfunction Header() {\n  const goHome = useDispatch(setView, { root: \"Home\" });\n  const goPlay = useDispatch(setView, { root: \"Play\" });\n  const goNew = useDispatch(setView, { root: \"New\" });\n  const goBlog = useDispatch(setView, { root: \"Blog\" });\n  const logged = useSelect(hasPlayer);\n  const goGame = useDispatch(setView, { root: \"Game\" });\n\n  return (\n    <Navbar bg=\"light\" expand=\"lg\" data-testid=\"header\">\n      <Container>\n        <Navbar.Brand onClick={goHome}>●▶ PLANETS GAME</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            <Nav.Link onClick={goHome}>Home</Nav.Link>\n            <Nav.Link onClick={goPlay}>Play</Nav.Link>\n            {logged && <Nav.Link onClick={goGame}>Game</Nav.Link>}\n            <Nav.Link onClick={goNew}>New</Nav.Link>\n            <Nav.Link onClick={goBlog}>Blog</Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport { css } from \"emotion\";\nimport pkg from \"../../../package.json\";\n\nconst versionClass = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  color: gray;\n  font-size: 85%;\n  z-index: 1000;\n`;\n\nfunction Version() {\n  return (\n    <div className={versionClass}>\n      {pkg.name} (v{pkg.version})\n    </div>\n  );\n}\n\nexport default Version;\n","function getAlert(state) {\n  return state.alert;\n}\n\nexport default getAlert;\n","import React from \"react\";\nimport { css } from \"emotion\";\nimport useSelect from \"../../../lib/useSelect\";\nimport getAlert from \"../selectors/getAlert\";\nimport useDispatch from \"../../../lib/useDispatch\";\nimport Button from \"../../../components/Button\";\nimport { deleteAlert } from \"../actions/deleteAlert\";\n\nconst alertClass = css`\n  background: var(white);\n  color: gray;\n  padding: 0.5em;\n`;\n\nfunction Alert() {\n  const alert = useSelect(getAlert);\n  const dismiss = useDispatch(deleteAlert);\n  if (!alert) return null;\n\n  return (\n    <div className={alertClass} data-testid=\"alert-bar\">\n      {alert.text}\n      <Button onClick={dismiss}>Dismiss</Button>\n    </div>\n  );\n}\n\nexport default Alert;\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Version from \"./Version\";\nimport Alert from \"../ducks/alert/components/Alert\";\n\nfunction AppLayout({ children }) {\n  return (\n    <>\n      <Version />\n      <Header />\n      <Alert />\n      {children}\n    </>\n  );\n}\n\nexport default AppLayout;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootswatch/dist/solar/bootstrap.css\";\nimport makeApp from \"./makeApp\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst appCompose =\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({ trace: true, traceLimit: 25 });\nconst App = makeApp(undefined, appCompose);\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport createDucksStore from \"./ducks/createDucksStore\";\nimport RootView from \"./views/RootView\";\nimport AppLayout from \"./layout/AppLayout\";\n\nexport default function makeApp(preloadedState, appCompose) {\n  const store = createDucksStore(preloadedState, appCompose);\n\n  function App() {\n    return (\n      <Provider store={store}>\n        <AppLayout>\n          <RootView />\n        </AppLayout>\n      </Provider>\n    );\n  }\n  return App;\n}\n"],"sourceRoot":""}